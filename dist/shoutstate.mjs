"use strict";import{Shouts as y}from"shoutexp";export class StateFactory{static StateFactory=StateFactory;StateFactory=StateFactory;active=!1;state=0;limit=0;static V_HL=t=>{};V_HL=StateFactory.V_HL;onOver=this.V_HL;onUnder=this.V_HL;onPop=this.V_HL;onPush=this.V_HL;onChange=this.V_HL;setOnOver(t){this.onOver=t}setOnUnder(t){this.onUnder=t}setOnPop(t){this.onPop=t}setOnPush(t){this.onPush=t}setOnChange(t){this.onChange=t}constructor(t){this.limit=t}checkState(){return this.active=this.state!==0}popState(){let t=new Array(3);return this.state>0?this.state--:t[0]=this.onUnder(this.state),this.checkState(),t[1]=this.onPop(this.state),t[2]=this.onChange(this.state),t}pushState(){let t=new Array(3);return this.state<this.limit?this.state++:t[0]=this.onOver(this.state),this.checkState(),t[1]=this.onPush(this.state),t[2]=this.onChange(this.state),t}}export const UseNS=y.ShoutModule(),NSname={check:e=>`check${e}`,use:e=>`use${e}`,undo:e=>`undo${e}`,access:e=>`access${e}`,lockUse:e=>`lockUse${e}`,mode:e=>`$$${e}`};export function createMode(e,t){let n=new StateFactory(t),i=new Array(5);function l(s,o=!0){return i[s]=o}function r(s,o){return i[s]&&o(s)}function h(){return r(0,n.checkState)}function u(){return r(1,n.pushState)}function c(){return r(2,n.popState)}function a(){return r(3,n.popState)}function p(s){return r(4,()=>l(s,!0))}const S={state:n,check:h,use:u,undo:c,access:a,lockUse:p,$$:f};function f(){return S}return UseNS.createShout(NSname.check(e),h),UseNS.createShout(NSname.use(e),u),UseNS.createShout(NSname.undo(e),c),UseNS.createShout(NSname.access(e),a),UseNS.createShout(NSname.lockUse(e),()=>p),UseNS.createShout(NSname.mode(e),f),S}
//# sourceMappingURL=shoutstate.mjs.map
